//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////plant1
///////////////////////////////////

//软仪表计算公式部分。
UNIT1_NOX_SIM:=7.73+0.42557*[pv:UNIT1_NOX_A_O]+0.38777*[pv:UNIT1_NOX_B_O];1
UNIT1_NOX_BAL:=[pv:UNIT1_NOX_FGD_O]-[pv:UNIT1_NOX_SIM];1

//shift use    
UNIT1_NOX_A_O:=[pv:10HSA31CQ101A];1
UNIT1_NOX_B_O:=[pv:10HSA32CQ101A];1
UNIT1_NOX_FGD_O:=[fn:pihis,10HTA50CQ104A,-1];1


UNIT1_SO2_PH:=[pv:10HTL20CQ101A];1
UNIT1_SO2_PUMP:=[pv:10HTF11AP0019]+[pv:10HTF12AP0019]+[pv:10HTF13AP0019]+[pv:10HTF14AP0019];1
UNIT1_SO2_SO2:=[pv:10SO2];1
UNIT1_SO2_DE:=[pv:U1TLIULV];1

UNIT1_FLOW_COAL:=[pv:1AL03-G392];1
UNIT1_FLOW_AIR:=[pv:1HLB20CF102-TOT];1
UNIT1_FLOW:=[pv:10HTA50CF101AC];1

//SO2 BAL/SIM CAL  //采用MATH方式
UNIT1_SO2_TEMP:=4.5-0.0076738704487919*[pv:UNIT1_SO2_PUMP]-0.905186173144217*[pv:UNIT1_SO2_PH]-0.000000182116*([pv:UNIT1_SO2_SO2]-500)*([pv:UNIT1_SO2_SO2]-500)+0.00111986382376282*([pv:UNIT1_SO2_SO2]-500);1
UINT1_SO2_DESIM:=100-[fn:expr2,Math.exp([pv:UNIT1_SO2_TEMP])];1
UNIT1_SO2_DSIM:=[fn:expr2,Math.abs(1-[pv:UINT1_SO2_DESIM]/100)];1
UNIT1_SO2_SIM:=[pv:UNIT1_SO2_DSIM]*[pv:10HTA10CQ103A];1
UNIT1_SO2_BAL:=[pv:UINT1_SO2_DESIM]-[pv:U1TLIULV];1

//FLOW BAL/SIM CAL  //修正1号机与2号机的偏差-2015-11-1
UNIT1_FLOW_SIM:=134.264402121125*[pv:1AL03-G392]+155.933205554879*[pv:1HLB20CF102-TOT]+1087000;1
UNIT1_FLOW_BAL:=134.264402121125*[pv:1AL03-G392]+155.933205554879*[pv:1HLB20CF102-TOT]+1087000-[pv:10HTA50CF101AC];1


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////plant2
///////////////////////////////////

//软仪表计算公式部分。
UNIT2_NOX_SIM:=7.73+0.35*[pv:UNIT2_NOX_A_O]+0.2*[pv:UNIT2_NOX_B_O];1
UNIT2_NOX_BAL:=[pv:UNIT2_NOX_FGD_O]-[pv:UNIT2_NOX_SIM];1

//shift use  
UNIT2_NOX_A_O:=[pv:20HSA31CQ101A];1
UNIT2_NOX_B_O:=[pv:20HSA32CQ101A];1
UNIT2_NOX_FGD_O:=[fn:pihis,20HTA50CQ104A,-3];1

UNIT2_SO2_PH:=[pv:20HTL20CQ101A];1
UNIT2_SO2_PUMP:=[pv:20HTF11AP0019]+[pv:20HTF12AP0019]+[pv:20HTF13AP0019]+[pv:20HTF14AP0019];1
UNIT2_SO2_SO2:=[pv:20SO2];1
UNIT2_SO2_DE:=[pv:U2TLIULV];1

UNIT2_FLOW_COAL:=[pv:2AL03-G392];1
UNIT2_FLOW_AIR:=[pv:2HLB20CF102-TOT];1
UNIT2_FLOW:=[pv:20HTA50CF101AC];1

//SO2 BAL/SIM CAL  //采用MATH方式  //1103 修改2号机脱硫公式
UINT2_SO2_DESIM:=100-[fn:expr2,Math.exp(-1.125728631-0.006963224*[pv:UNIT2_SO2_PUMP]+0.169474868*[pv:UNIT2_SO2_PH]-0.0000000651*([pv:UNIT2_SO2_SO2]-500)*([pv:UNIT2_SO2_SO2]-500)+0.000759122*([pv:UNIT2_SO2_SO2]-500))];1
UNIT2_SO2_DSIM:=[fn:expr2,Math.abs(1-[pv:UINT2_SO2_DESIM]/100)];1
UNIT2_SO2_SIM:=[pv:UNIT2_SO2_DSIM]*[pv:20HTA10CQ103A];1
UNIT2_SO2_BAL:=[pv:UINT2_SO2_DESIM]-[pv:U2TLIULV];1

//FLOW BAL/SIM CAL
UNIT2_FLOW_SIM:=134.264402121125*[pv:2AL03-G392]+155.933205554879*[pv:2HLB20CF102-TOT]+1834299;1
UNIT2_FLOW_BAL:=134.264402121125*[pv:2AL03-G392]+155.933205554879*[pv:2HLB20CF102-TOT]+1834299-[pv:20HTA50CF101AC];1
